@using Gymify.Application.ViewModels.ExerciseLibrary
@using Gymify.Data.Enums
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer
@model ExerciseLibraryViewModel

@if (!Model.Exercises.Any())
{
    <div style="text-align: center; padding: 60px 20px; color: #999;">
        <h3 style="color: #555; margin-bottom: 10px;">@Localizer["Empty_Title"]</h3>
        <p style="font-size: 14px;">@Localizer["Empty_Subtitle"]</p>
    </div>
}
else
{
    <div class="ex-grid">
        @foreach (var ex in Model.Exercises)
        {
            <div class="ex-card" onclick="openVideoModal('@ex.VideoEmbedUrl')">
                
                @if (ex.IsApproved)
                {
                    <div class="ex-badge verified" title="@Localizer["Badge_Verified_Tooltip"]">
                        @Localizer["Badge_Verified"]
                    </div>
                }
                else
                {
                    <div class="ex-badge pending" title="@Localizer["Badge_Community_Tooltip"]">
                        @Localizer["Badge_Community"]
                    </div>
                }

                <div class="ex-thumbnail-wrapper">
                    <img src="@ex.ThumbnailUrl" class="ex-thumbnail" alt="@ex.Name" loading="lazy" />
                    
                    @if (!string.IsNullOrEmpty(ex.VideoEmbedUrl))
                    {
                        <div class="ex-play-btn">
                            <i class="fa-solid fa-play" style="margin-left: 3px;"></i>
                        </div>
                    }
                </div>

                <div class="ex-card-body">
                    <div class="ex-type-badge">
                        @* Тут ми беремо string значення Enum і шукаємо його в ресурсах *@
                        @Localizer[((ExerciseType)ex.Type).ToString()]
                    </div>
                    
                    <h3 class="ex-title-text">@ex.Name</h3>
                    
                    <p class="ex-desc-text">
                        @ex.Description
                    </p>
                </div>

                <div class="ex-card-footer">
                    <span>
                        <i class="fa-solid fa-star" style="color: #ffc107; margin-right: 4px;"></i> 
                        @ex.BaseXP @Localizer["XP_Suffix"]
                    </span>
                </div>
            </div>
        }
    </div>
}

@if (Model.TotalPages > 1)
{
    <div style="display: flex; justify-content: center; align-items: center; gap: 15px; margin-top: 40px; padding-bottom: 20px;">
        
        @if (Model.CurrentPage > 1)
        {
            <button class="gym-btn gym-btn-secondary page-link" data-page="@(Model.CurrentPage - 1)" style="padding: 8px 20px;">
                @Localizer["Pagination_Prev"]
            </button>
        }
        else
        {
            <button class="gym-btn gym-btn-secondary" disabled style="opacity: 0.5; cursor: default; padding: 8px 20px;">
                @Localizer["Pagination_Prev"]
            </button>
        }

        <span style="font-weight: 700; color: #555; font-size: 14px;">
            @Localizer["Pagination_Info", Model.CurrentPage, Model.TotalPages]
        </span>

        @if (Model.CurrentPage < Model.TotalPages)
        {
            <button class="gym-btn gym-btn-secondary page-link" data-page="@(Model.CurrentPage + 1)" style="padding: 8px 20px;">
                @Localizer["Pagination_Next"]
            </button>
        }
        else
        {
            <button class="gym-btn gym-btn-secondary" disabled style="opacity: 0.5; cursor: default; padding: 8px 20px;">
                @Localizer["Pagination_Next"]
            </button>
        }
    </div>
}