@model ICollection<Gymify.Application.DTOs.Achievement.AchievementDto>
@{
    ViewData["Title"] = "Achievements";
}

<div class="achievements-page-wrapper">
    <div class="achievements-header">
        <h1 class="achievements-title">My Achievements</h1>
    </div>

    <div class="achievements-grid">
        @foreach (var a in Model)
        {
            // Розрахунок відсотка
            var percent = a.TargetValue == 0 ? 0 : (int)Math.Floor(a.Progress / (double)a.TargetValue * 100);
            // Захист від переповнення (не більше 100%)
            if (percent > 100) percent = 100;

            var cardClass = a.IsCompleted ? "is-completed" : "is-locked";

            <div class="achievement-card @cardClass">
                
                <div class="achievement-icon">
                    <img src="@a.IconUrl" alt="@a.Name" loading="lazy" />

                </div>

                <div class="achievement-info">
                    <h3>@a.Name</h3>
                    <p>@a.Description</p>
                </div>

                @if (!a.IsCompleted)
                {
                    <div class="achievement-progress-container">
                        <div class="achievement-progress-bar" style="width: @percent%"></div>
                    </div>
                    <div class="progress-text-label">
                        @a.Progress / @a.TargetValue
                    </div>
                }
                else 
                {
                    <div class="progress-text-label" style="color: #ffc107;">
                        Completed
                    </div>
                }
            </div>
        }
    </div>
</div>