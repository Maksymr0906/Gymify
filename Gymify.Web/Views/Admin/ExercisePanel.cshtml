@model List<Gymify.Application.DTOs.Comments.CommentAdminDto>

@{
    ViewData["Title"] = "Comment Moderation Panel";
}

<div class="ae-page-container">

    <h2 class="ae-page-title mb-3">Pending Comments</h2>

    @if (!Model.Any())
    {
        <div class="ae-alert ae-alert-success text-center">
            ✔ No comments require moderation
        </div>
    }
    else
    {
        <div class="ae-table-wrapper">
            <table class="ae-table ae-table-hover">
                <thead class="ae-table-header">
                    <tr>
                        <th>Author</th>
                        <th>Content</th>
                        <th>Target</th>
                        <th>Type</th>
                        <th style="width: 200px;">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var c in Model)
                    {
                        <tr>

                            <!-- ========== Update ========= -->
                            <form method="post" action="/admin/comments/update">
                                <input type="hidden" name="id" value="@c.Id" />

                            <td>@c.AuthorName</td>

                            <td>
                                <textarea name="content" class="ae-input-std" style="height:60px;">@c.Content</textarea>
                            </td>

                            <td>@c.TargetId</td>
                            <td>@c.TargetType</td>

                            <td class="ae-flex-row ae-gap-sm">

                                <button type="submit" class="ae-btn ae-btn-primary btn-sm">
                                    💾 Save
                                </button>
                                </form>


                                <!-- ========== Approve ========== -->
                                <form method="post" action="/admin/comments/approve" class="d-inline">
                                    <input type="hidden" name="id" value="@c.Id" />
                                    <button type="submit" class="ae-btn ae-btn-success btn-sm">
                                        ✓ Approve
                                    </button>
                                </form>

                                <!-- ========== Reject ========== -->
                                <form method="post" action="/admin/comments/reject" class="ae-flex-row ae-gap-sm d-inline">
                                    <input type="hidden" name="id" value="@c.Id" />
                                    <input type="text" name="reason" placeholder="Reason..." class="ae-input-std" required />
                                    <button type="submit" class="ae-btn ae-btn-danger btn-sm">
                                        ✕ Reject
                                    </button>
                                </form>

                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>
