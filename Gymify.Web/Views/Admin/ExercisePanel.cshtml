@model List<Gymify.Application.DTOs.Exercise.ExerciseDto>

@{
    ViewData["Title"] = "Exercise Moderation Panel";
}

<div class="ae-page-container">

    <h2 class="ae-page-title mb-3">Pending Exercises</h2>

    @if (!Model.Any())
    {
        <div class="ae-alert ae-alert-success text-center">
            ✔ No exercises
        </div>
    }
    else
    {
        <div class="ae-table-wrapper">
            <table class="ae-table ae-table-hover">
                <thead class="ae-table-header">
                    <tr>
                        <th>Name</th>
                        <th>Description</th>
                        <th>XP</th>
                        <th>Difficulty</th>
                        <th>Type</th>
                        <th>Video URL</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var ex in Model)
                    {
                        <tr>
                            <form method="post" action="/admin/exercises/approve">
                                <input type="hidden" name="Id" value="@ex.Id" />

                            <td>
                                <input name="Name" value="@ex.Name" class="ae-input-std" />
                            </td>
                            <td>
                                <input name="Description" value="@ex.Description" class="ae-input-std" />
                            </td>
                            <td>
                                <input name="BaseXP" type="number" min="0" value="@ex.BaseXP" class="ae-input-std" />
                            </td>
                            <td>
                                <input name="DifficultyMultiplier" type="number" step="0.1" min="0" value="@ex.DifficultyMultiplier" class="ae-input-std" />
                            </td>
                            <td>
                                <select name="Type" class="ae-input-std">
                                    @foreach (var t in Enum.GetValues(typeof(Gymify.Data.Enums.ExerciseType)))
                                    {
                                        <option value="@t" selected="@(t.Equals(ex.Type))">@t</option>
                                    }
                                </select>
                            </td>
                            <td>
                                <input name="VideoURL" value="@ex.VideoURL" class="ae-input-std" />
                            </td>
                            <td class="ae-flex-row ae-gap-sm">
                                <button type="submit" class="ae-btn ae-btn-success btn-sm">✓ Approve</button>
                                </form>

                                <form method="post" action="/admin/exercises/reject" class="ae-flex-row ae-gap-sm">
                                    <input type="hidden" name="id" value="@ex.Id" />
                                    <input type="text" name="reason" placeholder="Reason..." class="ae-input-std" required />
                                    <button type="submit" class="ae-btn ae-btn-danger btn-sm">✕ Reject</button>
                                </form>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>